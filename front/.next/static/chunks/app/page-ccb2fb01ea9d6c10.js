(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1881:(e,s,t)=>{Promise.resolve().then(t.bind(t,5450))},5450:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var l=t(5155),r=t(2115);let a=e=>{let{searchType:s,setSearchType:t,onSearch:a,loading:n}=e,[c,o]=(0,r.useState)("");return(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 w-96 h-[300px]",children:[(0,l.jsx)("p",{className:"mb-4 font-semibold",children:"What are you searching for?"}),(0,l.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"radio",name:"searchType",checked:"people"===s,onChange:()=>{t("people"),o("")}}),"People"]}),(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"radio",name:"searchType",checked:"films"===s,onChange:()=>{t("films"),o("")}}),"Movies"]})]}),(0,l.jsx)("input",{type:"text",placeholder:"Search...",value:c,onChange:e=>o(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 mb-4"}),(0,l.jsx)("button",{onClick:()=>a(c),disabled:!c||""==c,className:"w-full bg-green-500 rounded-[10px] hover:bg-green-600 text-white font-semibold py-2 cursor-pointer disabled:bg-[#c4c4c4] disabled:cursor-not-allowed",children:n?"SEARCHING...":"SEARCH"})]})};var n=t(6874),c=t.n(n);let o=e=>{let{isLoading:s}=e;return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-400 px-4 py-8 ".concat(s?"min-h-84":""),children:[(0,l.jsx)("p",{className:"text-base font-semibold",children:s?"Searching...":"There are zero matches."}),!s&&(0,l.jsx)("p",{className:"text-sm",children:"Use the form to search for People or Movies."})]})},i=e=>{let{results:s,isLoading:t,searchType:r}=e;return(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 w-96 h-120",children:[(0,l.jsx)("h2",{className:"font-bold mb-4",children:"Results"}),(0,l.jsx)("ul",{className:"space-y-4 h-full overflow-hidden",children:(null==s?void 0:s.length)===0||t?(0,l.jsx)(o,{isLoading:t}):(0,l.jsx)("div",{className:"flex flex-col overflow-y-auto h-full max-h-[90%]",children:s.map((e,s)=>{let t=e.properties;return(0,l.jsxs)("li",{className:"flex justify-between items-center border-[#c4c4c4] border-b pb-2 pt-2",children:[(0,l.jsxs)("span",{className:"font-semibold",children:["name"in t&&(null==t?void 0:t.name),"title"in t&&(null==t?void 0:t.title)]}),(0,l.jsx)(c(),{href:"/".concat(r,"/").concat(e.uid),children:(0,l.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white px-4 py-1  cursor-pointer font-bold rounded-[8.5px]",children:"SEE DETAILS"})})]},s)})})})]})},d=t(9509).env.NEXT_PUBLIC_API_URL||"http://api:4000";async function h(e,s){try{let t=await fetch("".concat(d,"/api/").concat(e,"?search=").concat(encodeURIComponent(s)));if(!t.ok)throw Error("Failed to fetch");return(await t.json()).result}catch(e){return console.error("Error fetching person detail:",e),[]}}function u(){let[e,s]=(0,r.useState)("people"),[t,n]=(0,r.useState)(""),{results:c,loading:o}=function(e,s){let[t,l]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!s)return void l([]);(async()=>{n(!0),o(null);try{let t=await h(e,s);l(t)}catch(e){console.error(e),o("Failed to fetch data")}finally{n(!1)}})()},[e,s]),{results:t,loading:a,error:c}}(e,t);return(0,l.jsxs)("div",{className:"flex gap-8 items-start",children:[(0,l.jsx)(a,{searchType:e,loading:o,setSearchType:e=>{s(e),n("")},onSearch:e=>n(e)}),(0,l.jsx)(i,{searchType:e,results:c,isLoading:o})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(1881)),_N_E=e.O()}]);